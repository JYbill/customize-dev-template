services: # å®¹å™¨åˆ—è¡¨
  hbbs: # é•œåƒå
    container_name: hbbs # å®¹å™¨å
    image: rustdesk/rustdesk-server:latest # å¯¹åº”é•œåƒä¸å…¶ç‰ˆæœ¬
    
    
    volumes: # æŒ‚è½½å·è½´
      - /home/ubuntu/docker/rustdesk:/root
      # è®¾ç½®å®¹å™¨å¯¹æŒ‚è½½å·è½´çš„æƒé™(å³å¯¹å®¿ä¸»æœºçš„æ“ä½œæƒé™)
      - /data:/data:rw # å®¹å™¨åªæœ‰è¯»å†™æƒé™
      - /etc/localtime:/etc/localtime:ro # åªæœ‰åªè¯»æƒé™
      # è¯»å–ç¯å¢ƒå˜é‡DOCKER_VOLUME_DIRECTORYï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä¸º"."å³"./volumes/etcd:/etcd"
      - ${DOCKER_VOLUME_DIRECTORY:-.}/volumes/etcd:/etcd
      
    
    network_mode: "host" # ç½‘ç»œ
    depends_on: # ä¾èµ–äºhbbrå®¹å™¨å¯åŠ¨åï¼Œæ‰å¯åŠ¨hbbs
      - hbbr
      
    privileged: true # å…è®¸è®¿é—®å®¿ä¸»æœºæ‰€æœ‰æƒé™
    
    # é‡å¯è§„åˆ™
    # alwaysï¼šæ€»æ˜¯é‡å¯ï¼Œä¸æ¨è
    # unless-stoppedï¼šå´©æºƒæˆ–é€€å‡ºåœæ­¢äº†ï¼Œåˆ™ä¼šè‡ªåŠ¨é‡å¯ï¼›è€Œæ‰‹åŠ¨é€€å‡ºåˆ™ä¸ä¼šğŸ‘
    # on-failure: nï¼šå‘ç”Ÿé”™è¯¯åè‡ªåŠ¨æœ€å¤šé‡å¯næ¬¡
    restart: unless-stopped
    
    # ä»docker.envè¯»å–ç¯å¢ƒå˜é‡
    env_file:
      - docker.env
    environment:
    	- TZ=Asia/Shanghai
    
    # ä¸€ä¸ªç½‘ç»œç«¯å£éƒ¨ç½²3ä¸ªå‰¯æœ¬å®ä¾‹ï¼Œéœ€è¦é…åˆdocker swarmå¯åŠ¨
    deploy:
      replicas: 3

# è®¾ç½®ç½‘ç»œ
# è®¿é—®ï¼šhttp://my_network:port
networks:
  default:
    name: my_network